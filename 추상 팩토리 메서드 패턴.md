# 팩토리 메서드 패턴 vs 추상 팩토리 패턴 정리

## 1. 기본 개념 및 구조
팩토리 메서드 패턴(Factory Method Pattern)과 추상 팩토리 패턴(Abstract Factory Pattern)은 객체 생성 관련 디자인 패턴이지만, 목적과 구조에서 차이가 있습니다.

### 🏭 팩토리 메서드 패턴 (Factory Method Pattern)
- 객체 생성을 서브클래스(하위 클래스)에 위임하는 패턴.
- 부모 클래스(또는 인터페이스)는 객체 생성의 인터페이스만 정의하고, 구체적인 객체 생성을 서브클래스가 담당.

**구조**
- Product (제품 인터페이스/추상 클래스)
- Concrete Product (구체 제품)
- Creator (추상 클래스)
- Concrete Creator (구체 클래스)

**Java 예제**
```java
interface Button { void render(); }
class WindowsButton implements Button { public void render(){ System.out.println("윈도우 버튼"); } }
class MacButton implements Button { public void render(){ System.out.println("맥 버튼"); } }

abstract class Dialog {
    public abstract Button createButton();
}
class WindowsDialog extends Dialog {
    public Button createButton(){ return new WindowsButton(); }
}
class MacDialog extends Dialog {
    public Button createButton(){ return new MacButton(); }
}
```

---

### 🏭 추상 팩토리 패턴 (Abstract Factory Pattern)
- 관련된 객체들의 집합(제품군)을 생성하는 인터페이스 제공.
- 서로 호환되는 객체들을 일관되게 생성할 수 있음.
- 예: 버튼 + 체크박스 같은 UI 제품군을 통째로 교체 가능.

**구조**
- Abstract Factory
- Concrete Factory
- Abstract Product
- Concrete Product

**Java 예제**
```java
interface Button { void render(); }
interface Checkbox { void render(); }

class WindowsButton implements Button { public void render(){ System.out.println("윈도우 버튼"); } }
class MacButton implements Button { public void render(){ System.out.println("맥 버튼"); } }

class WindowsCheckbox implements Checkbox { public void render(){ System.out.println("윈도우 체크박스"); } }
class MacCheckbox implements Checkbox { public void render(){ System.out.println("맥 체크박스"); } }

interface GUIFactory {
    Button createButton();
    Checkbox createCheckbox();
}
class WindowsFactory implements GUIFactory {
    public Button createButton(){ return new WindowsButton(); }
    public Checkbox createCheckbox(){ return new WindowsCheckbox(); }
}
class MacFactory implements GUIFactory {
    public Button createButton(){ return new MacButton(); }
    public Checkbox createCheckbox(){ return new MacCheckbox(); }
}
```

---

## 2. 비교 요약
| 구분 | Factory Method | Abstract Factory |
|------|----------------|------------------|
| 목적 | 객체 생성 책임을 서브클래스에 위임 | 관련된 객체 집합(제품군) 생성 |
| 초점 | 제품 하나 생성 | 제품군 전체 생성 |
| 확장성 | 새로운 제품 추가 용이 | 제품군 추가는 어렵지만 일관성 유지 |
| 예시 | 버튼 하나 생성 | 버튼 + 체크박스 세트 생성 |

---

## 3. 조합: 추상 팩토리 + 팩토리 메서드
실무에서는 두 패턴을 함께 사용하는 경우가 많음.

- 추상 팩토리: 큰 틀 (제품군 정의)
- 팩토리 메서드: 세부 구현 (개별 제품 생성 로직 캡슐화)

**Java 예제**
```java
interface Button { void render(); }
interface Checkbox { void render(); }

class WindowsButton implements Button { public void render(){ System.out.println("윈도우 버튼"); } }
class MacButton implements Button { public void render(){ System.out.println("맥 버튼"); } }
class WindowsCheckbox implements Checkbox { public void render(){ System.out.println("윈도우 체크박스"); } }
class MacCheckbox implements Checkbox { public void render(){ System.out.println("맥 체크박스"); } }

interface GUIFactory {
    Button createButton();
    Checkbox createCheckbox();
}

abstract class BaseFactory implements GUIFactory {
    protected abstract Button createButtonProduct();
    protected abstract Checkbox createCheckboxProduct();

    public Button createButton(){ return createButtonProduct(); }
    public Checkbox createCheckbox(){ return createCheckboxProduct(); }
}

class WindowsFactory extends BaseFactory {
    protected Button createButtonProduct(){ return new WindowsButton(); }
    protected Checkbox createCheckboxProduct(){ return new WindowsCheckbox(); }
}
class MacFactory extends BaseFactory {
    protected Button createButtonProduct(){ return new MacButton(); }
    protected Checkbox createCheckboxProduct(){ return new MacCheckbox(); }
}

public class CombinedFactoryDemo {
    public static void main(String[] args) {
        GUIFactory factory = new MacFactory();
        Button button = factory.createButton();
        Checkbox checkbox = factory.createCheckbox();
        button.render();
        checkbox.render();
    }
}
```

---

## 4. 최종 요약
- **Factory Method**: "객체 하나를 어떻게 만들까?" → 단일 객체 생성 책임 분리.
- **Abstract Factory**: "서로 연관된 객체들을 어떻게 세트로 만들까?" → 제품군 단위 일관성 유지.
- **조합 사용**: 추상 팩토리가 큰 틀 제공, 팩토리 메서드가 세부 구현 담당.
